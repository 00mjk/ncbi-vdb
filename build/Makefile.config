### AUTO-GENERATED FILE ###

OS_ARCH = $(shell perl $(TOP)/os-arch.perl)
include $(TOP)/Makefile.userconfig
include $(TOP)/Makefile.config.$(OS_ARCH)

# build type
BUILD ?= rel

# tools

# tool options
CLSPATH = -classpath $(CLSDIR)

# NGS API and library version
VERSION = 2.4.2
MAJMIN = 2.4
MAJVERS = 2

# derived paths
MODPATH  ?= $(subst $(TOP)/,,$(CURDIR))
SRCDIR   ?= $(TOP)/$(MODPATH)
MAKEFILE ?= $(abspath $(firstword $(MAKEFILE_LIST)))
BINDIR    = $(TARGDIR)/bin
LIBDIR    = $(TARGDIR)/lib
ILIBDIR   = $(TARGDIR)/ilib
OBJDIR    = $(TARGDIR)/obj/$(MODPATH)
CLSDIR    = $(TARGDIR)/cls

# exports
export TOP
export MODPATH
export SRCDIR
export MAKEFILE

# auto-compilation rules
$(OBJDIR)/%.$(OBJX): %.c
	$(CC) -o $@ $< $(CFLAGS)
$(OBJDIR)/%.$(LOBX): %.c
	$(CC) -o $@ $< $(PIC) $(CFLAGS)
$(OBJDIR)/%.$(OBJX): %.cpp
	$(CP) -o $@ $< $(CFLAGS)
$(OBJDIR)/%.$(LOBX): %.cpp
	$(CP) -o $@ $< $(PIC) $(CFLAGS)

VPATH = $(SRCDIR)

# directory rules
$(BINDIR) $(LIBDIR) $(ILIBDIR) $(OBJDIR):
	mkdir -p $@

# not real targets
.PHONY: default clean install all std $(TARGETS)

# dependencies
include $(wildcard $(OBJDIR)/*.d)

